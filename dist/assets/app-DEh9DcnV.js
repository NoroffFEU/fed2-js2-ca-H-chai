(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();const _="c8603e77-83d7-41ba-a742-4494007b8666",Z="https://v2.api.noroff.dev";function E(p){const e=new Headers;return e.append("X-Noroff-API-Key",_),localStorage.token&&e.append("Authorization",`Bearer ${localStorage.token}`),p&&e.append("Content-Type","application/json"),e}class l{static get user(){try{return JSON.parse(localStorage.getItem("user")).name}catch{return null}}static set user(e){localStorage.setItem("user",JSON.stringify(e))}static set token(e){localStorage.setItem("token",e)}static apiBase=Z;static paths={login:`${l.apiBase}/auth/login`,register:`${l.apiBase}/auth/register`,socialPost:`${l.apiBase}/social/posts`,socialProfiles:`${l.apiBase}/social/profiles`};auth={login:async({email:e,password:t})=>{const n=JSON.stringify({email:e,password:t}),a=await fetch(l.paths.login,{headers:E(!0),method:"POST",body:n}),{data:o}=await l.util.handleResponse(a,"Could not login this account"),{accessToken:s,...i}=o;return l.token=s,l.user=i,window.location.href="/post/feed/?page=1",o},register:async({name:e,email:t,password:n})=>{const a=JSON.stringify({name:e,email:t,password:n}),o=await fetch(l.paths.register,{headers:E(!0),method:"POST",body:a});return await l.util.handleResponse(o,"Could not register this account")}};static util={handleResponse:async(e,t,n="json")=>{if(e.ok)return e.status===204?null:await e[n]();const o=(await e[n]()).errors[0]?.message||"Unknown error";throw new Error(`${t}: ${o}`)}};post={create:async({title:e,body:t,tags:n,media:a})=>{const o=JSON.stringify({title:e,body:t,tags:n,media:a}),s=await fetch(l.paths.socialPost,{headers:E(!0),method:"POST",body:o}),i=await l.util.handleResponse(s,"Could not create post");return window.location.href="/post/feed/?page=1",i},delete:async e=>{const t=await fetch(`${l.paths.socialPost}/${e}`,{headers:E(),method:"DELETE"}),n=await l.util.handleResponse(t,"Could not delete post.");return alert("The post was deleted!"),window.location.href=`/profile/?name=${l.user}`,n},readPost:async(e,t=null)=>{const n=new URL(`${l.paths.socialPost}/${e}`);n.searchParams.append("_author",!0),n.searchParams.append("_comments",!0),t&&n.searchParams.append("_tag",t);const a=await fetch(n.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(a,"Could not get the post")},update:async(e,{title:t,body:n,tags:a,media:o})=>{const s=JSON.stringify({title:t,body:n,tags:a,media:o}),i=await fetch(`${l.paths.socialPost}/${e}`,{headers:E(!0),method:"PUT",body:s});await l.util.handleResponse(i,"Could not update post"),window.location.href=`/post/?id=${e}`},comment:async(e,{body:t,replyToId:n})=>{const a={body:t};n!==void 0&&(a.replyToId=n);const o=JSON.stringify(a),s=await fetch(`${l.paths.socialPost}/${e}/comment`,{headers:E(!0),method:"POST",body:o});return await l.util.handleResponse(s,"Could not comment on the post")},deleteComment:async(e,t)=>{const n=await fetch(`${l.paths.socialPost}/${e}/comment/${t}`,{headers:E(),method:"DELETE"}),a=await l.util.handleResponse(n,"Could not delete comment.");return alert("The comment was deleted."),a}};posts={getPosts:async(e=12,t=1,n)=>{const a=new URL(l.paths.socialPost);a.searchParams.append("limit",e),a.searchParams.append("page",t),a.searchParams.append("_author",!0),a.searchParams.append("_comments",!0),n&&a.searchParams.append("_tag",n);const o=await fetch(a.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(o,"Could not get posts")},getAllPosts:async()=>{const e=await fetch(l.paths.socialPost,{headers:E(),method:"GET"});return await l.util.handleResponse(e,"Could not get all posts")}};profile={readUsersPosts:async(e,t=12,n=1)=>{const a=new URL(`${l.paths.socialProfiles}/${e}/posts`);a.searchParams.append("_author",!0),a.searchParams.append("_comments",!0),a.searchParams.append("limit",t),a.searchParams.append("page",n);const o=await fetch(a.toString(),{headers:E(),method:"GET"});return await l.util.handleResponse(o,"Could not get user's post.")},readProfile:async function(t){const n=await fetch(`${l.paths.socialProfiles}/${t}`,{headers:E(),method:"GET"});return await l.util.handleResponse(n,"Could not get profile.")},update:async(e,{bio:t,avatar:n,banner:a})=>{const o=JSON.stringify({bio:t,avatar:n,banner:a}),s=await fetch(`${l.paths.socialProfiles}/${e}`,{headers:E(!0),method:"PUT",body:o});await l.util.handleResponse(s,"Could not update profile."),window.location.href=`/profile/?name=${e}`},follow:async e=>{const t=await fetch(`${l.paths.socialProfiles}/${e}/follow`,{headers:E(),method:"PUT"});return await l.util.handleResponse(t,"Could not follow the user.")},unfollow:async e=>{const t=await fetch(`${l.paths.socialProfiles}/${e}/unfollow`,{headers:E(),method:"PUT"});return await l.util.handleResponse(t,"Could not unfollow the user.")}}}const h=new l(Z);function G(){localStorage.token||(alert("You must be logged in to view this page"),window.location.href="/auth/login/")}function A(p){const e=new Date(p),t={day:"2-digit",month:"2-digit",year:"numeric"};return e.toLocaleDateString("en-GB",t)}function V(p){const e=document.createElement("a");e.classList.add("post-container"),e.id=p.id,e.href=`/post/?id=${p.id}`;const t=document.createElement("figure"),n=document.createElement("img");n.classList.add("thumbnail"),p.media?.url?(n.src=p.media.url,n.alt=p.media.alt,n.onerror=()=>{n.src="../../../../images/default-thumbnail.jpg",n.alt="Default Thumbnail"}):(n.src="../../../../images/default-thumbnail.jpg",n.alt="No Media Available"),t.appendChild(n);const a=document.createElement("div");a.classList.add("post-text-container");const o=document.createElement("div");o.classList.add("post-user-date");const s=document.createElement("div");s.classList.add("user");const i=document.createElement("i");i.classList.add("fa-regular","fa-user","user-icon");const d=document.createElement("a");d.classList.add("post-author"),d.textContent=p.author.name,d.href=`/profile/?name=${p.author.name}`,s.append(i,d);const m=document.createElement("div");m.classList.add("date");const r=document.createElement("i");r.classList.add("fa-regular","fa-calendar");const c=document.createElement("p");c.textContent=A(p.created),m.append(r,c),o.append(s,m);const u=document.createElement("div");u.classList.add("post-tag-comment");const L=document.createElement("ul");L.classList.add("tag-list"),p.tags?.filter(B=>B.trim().length>0).forEach(B=>{const x=document.createElement("li");x.classList.add("tag-item"),x.textContent=B,L.appendChild(x)});const f=document.createElement("div");f.classList.add("comment");const C=document.createElement("i");C.classList.add("fa-regular","fa-comments");const S=document.createElement("p");S.textContent=p.comments.length,f.append(C,S),u.append(L,f);const v=document.createElement("p");return v.classList.add("post-title"),v.textContent=p.title,a.append(o,u,v),e.append(t,a),e}function ee(p){const e=document.createElement("div");e.classList.add("single-post-container");const t=document.createElement("div");t.classList.add("content-upper");const n=document.createElement("h1");n.textContent=p.title;const a=document.createElement("img");a.classList.add("thumbnail"),p.media?.url?(a.src=p.media.url,a.alt=p.media.alt):(a.src="../../../../images/default-thumbnail.jpg",a.alt="No Media Available");const o=document.createElement("div");o.classList.add("post-user-date");const s=document.createElement("div");s.classList.add("user");const i=document.createElement("i");i.classList.add("fa-regular","fa-user","user-icon");const d=document.createElement("a");d.textContent=p.author.name,d.href=`/profile/?name=${p.author.name}`,s.append(i,d);const m=document.createElement("div");m.classList.add("date");const r=document.createElement("i");r.classList.add("fa-regular","fa-calendar");const c=document.createElement("p");c.textContent=A(p.created),m.append(r,c),o.append(s,m);const u=document.createElement("ul");u.classList.add("tag-list","single-post-tag-list"),p.tags?.filter(y=>y.trim().length>0).forEach(y=>{const w=document.createElement("li");w.classList.add("tag-item"),w.textContent=y,u.appendChild(w)});const g=document.createElement("div");g.classList.add("content");const f=document.createElement("p");f.textContent=p.body,g.appendChild(f);const C=document.createElement("div");C.classList.add("comment-section");const S=document.createElement("p");S.classList.add("section-title"),S.textContent=`Comment (${p.comments.length})`;const v=document.createElement("ul");v.classList.add("comment-list");const B=p.comments,x=B.filter(y=>y.replyToId===null);for(let y=0;y<x.length;y++){const w=document.createElement("li");w.classList.add("comment-item","original-comment-item");const b=x[y];w.id=b.id,w.dataset.username=b.author.name;const T=document.createElement("div");T.classList.add("comment-container");const k=document.createElement("div");k.classList.add("user-info");const q=document.createElement("img");q.src=b.author.avatar.url;const P=document.createElement("a");P.classList.add("comment-username"),P.href=`/profile/?name=${b.author.name}`,P.textContent=b.author.name,k.append(q,P);const R=document.createElement("div");R.classList.add("comment-content");const D=document.createElement("p");D.classList.add("comment-text"),D.textContent=b.body;const I=document.createElement("button");I.classList.add("comment-delete-button");const M=document.createElement("i");M.classList.add("fa-solid","fa-trash-can"),I.appendChild(M),R.append(D,I);const U=document.createElement("button");U.classList.add("reply-button"),U.innerHTML='<i class="fa-solid fa-reply"></i>Reply',T.append(k,R,U);const O=document.createElement("ul");O.classList.add("reply-list","ul-padding-left"),w.append(T,O),v.appendChild(w)}const H=B.filter(y=>y.replyToId!==null),N=p.comments;for(let y=0;y<H.length;y++){const w=document.createElement("li");w.classList.add("comment-item","reply-comment-item");const b=H[y];w.id=b.id,w.dataset.username=b.author.name;const T=document.createElement("div");T.classList.add("comment-container");const k=document.createElement("div");k.classList.add("user-info");const q=document.createElement("img");q.src=b.author.avatar.url;const P=document.createElement("a");P.classList.add("comment-username"),P.href=`/profile/?name=${b.author.name}`,P.textContent=b.author.name,k.append(q,P);const R=document.createElement("div");R.classList.add("comment-content");const D=document.createElement("p");D.classList.add("comment-text"),D.textContent=b.body;const I=document.createElement("button");I.classList.add("comment-delete-button");const M=document.createElement("i");M.classList.add("fa-solid","fa-trash-can"),I.appendChild(M),R.append(D,I);const U=document.createElement("button");U.classList.add("reply-button"),U.innerHTML='<i class="fa-solid fa-reply"></i>Reply',T.append(k,R,U);const O=document.createElement("ul");if(O.classList.add("reply-list"),w.append(T,O),N.find(W=>Number(W.id)===b.replyToId)){const W=Array.from(v.querySelectorAll("li.comment-item"));Array.from(v.querySelectorAll("ul.reply-list")).forEach((z,ae)=>{});const Q=W.find(z=>Number(z.id)===b.replyToId);Q?Q.querySelector(".reply-list").appendChild(w):console.error("Parent reply item not found")}}const F=document.createElement("form");F.classList.add("comment-form"),F.name="comment";const Y=document.createElement("p");Y.classList.add("my-username"),Y.textContent=l.user;const X=document.createElement("p");X.classList.add("reply-message");const K=document.createElement("label");K.setAttribute("for","comment");const J=document.createElement("textarea");J.placeholder="Write comment here",J.name="comment",J.id="comment",K.appendChild(J);const j=document.createElement("button");return j.classList.add("submit-type-button","comment-button"),j.type="submit",j.innerText="Add comment",F.append(Y,X,K,j),C.append(S,v,F),t.append(n,a,o,u,g),e.append(t,C),e}class $ extends l{constructor(){super(),this.router(),this.replyToId=null}async router(e=window.location.pathname){switch(e){case"/":await this.views.login();break;case"/auth/login/":await this.views.login();break;case"/auth/register/":await this.views.register();break;case"/post/":await this.views.post();break;case"/post/edit/":await this.views.postEdit();break;case"/post/create/":await this.views.postCreate();break;case"/post/feed/":await this.views.feed();break;case"/profile/":await this.views.profile();break;case"/profile/update/":await this.views.profileUpdate();break;default:await this.views.notFound()}}static form={handleSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t);return Object.fromEntries(n.entries())}};setReplyToId(e){const t=e.target.closest(".comment-item");this.replyToId=Number(t.id);const n=t.dataset.username;t.style.backgroundColor="#dedede";const a=document.querySelector(".reply-message");a.innerHTML=`<button class="cancel" type="button"><i class="fa-solid fa-circle-xmark"></i></button>Replying to <span class="reply-to">${n}</span>`,document.querySelector(".cancel").addEventListener("click",()=>{a.innerHTML="",this.replyToId=null,t.style.backgroundColor="transparent"})}setupReplyButtons(){document.querySelectorAll(".reply-button").forEach(t=>{t.addEventListener("click",n=>this.setReplyToId(n))})}views={register:async()=>{document.forms.register.addEventListener("submit",this.events.register)},login:async()=>{document.forms.login.addEventListener("submit",this.events.login)},feed:async()=>{this.events.logout(),this.events.myPage();const t=new URLSearchParams(window.location.search).get("page")||localStorage.getItem("page")||1;this.events.post.displayPosts(Number(t))},postCreate:async()=>{G(),this.events.logout(),this.events.myPage(),document.forms.createPost.addEventListener("submit",this.events.post.create)},postEdit:async()=>{G(),this.events.logout(),this.events.myPage(),this.events.post.update(),this.events.post.delete()},post:async()=>{this.events.logout(),this.events.myPage(),this.events.post.displaySinglePost()},profile:async()=>{G(),this.events.logout(),this.events.myPage(),this.animation.headerPadding();const t=new URLSearchParams(window.location.search).get("page")||1;this.events.profile.displayProfilePage(Number(t))},profileUpdate:async()=>{G(),this.events.logout(),this.events.profile.updateProfile()},notFound:async()=>{alert("Page cannot be found in /src/views")}};currentPage=1;events={login:async e=>{const t=$.form.handleSubmit(e);try{await h.auth.login(t)}catch(n){alert(n.message)}},register:async e=>{const t=$.form.handleSubmit(e),{name:n,email:a}=t;try{await h.auth.register(t),alert(`Registration successful!
Username: ${n}
Email: ${a}`),window.location.href="/auth/login/"}catch(o){alert(`${o.message}.
Please try again.`)}},logout:()=>{document.querySelector(".logout-button").addEventListener("click",t=>{t.preventDefault(),l.user=null,l.token=null,localStorage.page=null,alert("You have successfully logged out."),window.location.href="/"})},myPage:()=>{const e=document.querySelector(".my-page");e.href=`/profile/?name=${l.user}`},post:{create:async e=>{const t=$.form.handleSubmit(e),n={url:t["media[url]"],alt:t["media[alt]"]},{title:a,body:o,tags:s}=t,i=s?s.split(",").map(d=>d.trim()).filter(d=>d.length>0):[];try{await h.post.create({title:a,body:o,tags:i,media:n})}catch(d){alert(d.message)}},delete:()=>{document.querySelector(".delete-button").addEventListener("click",async()=>{try{const n=new URLSearchParams(window.location.search).get("id");window.confirm("Are you sure you want to delete this post?")&&await h.post.delete(n)}catch(t){alert(t.message)}})},displayPosts:async(e=1)=>{try{const t=await h.posts.getPosts(12,e),{data:n,meta:a}=t,{currentPage:o,pageCount:s}=a,i=document.querySelector(".feed");i.innerHTML="",n.forEach(r=>{const c=V(r);i.appendChild(c)});const d=`${window.location.pathname}?page=${e}`;window.history.replaceState({},"",d),this.pagination.feedPagination(o,s),window.scrollTo({top:0,behavior:"smooth"}),document.querySelectorAll(".post-container").forEach(r=>{r.addEventListener("click",()=>{const u=new URLSearchParams(window.location.search).get("page");localStorage.setItem("page",u)})})}catch(t){alert(t.message)}},displaySinglePost:async()=>{try{const t=new URLSearchParams(window.location.search).get("id"),a=(await h.post.readPost(t)).data,o=a.author.name,s=document.createElement("button");s.classList.add("edit-button","button-dark"),s.textContent="Edit";const i=document.createElement("i");i.classList.add("fa-regular","fa-pen-to-square"),s.insertBefore(i,s.firstChild),s.dataset.id=t,o===l.user?s.style.display="block":s.style.display="none";const d=document.querySelector(".header-nav");d.insertBefore(s,d.firstChild),s.addEventListener("click",()=>{window.location.href=`/post/edit/?id=${t}`});const m=document.querySelector(".single-post");m.innerHTML="";const r=ee(a);m.appendChild(r);const c=document.querySelector(".back-to-profile-page");c.href=`/profile/?name=${o}`,c.textContent=`${o}'s page`;const u=document.createElement("i");u.classList.add("fa-solid","fa-chevron-left","back-to-profile-icon"),c.insertBefore(u,c.firstChild),document.forms.comment.addEventListener("submit",this.events.post.comment);const g=document.querySelector(".back-link-on-single-page"),f=localStorage.getItem("page");g.href=`/post/feed/?page=${f}`,this.events.post.deleteComment(),this.setupReplyButtons(),this.pagination.singlePostPagination()}catch(e){alert(e.message)}},update:async()=>{try{const t=new URLSearchParams(window.location.search).get("id"),n=await h.post.readPost(t),{data:a}=n,{title:o,body:s,tags:i,media:d}=a;document.getElementById("title").value=o,document.getElementById("content").value=s,document.getElementById("tags").value=i.join(","),document.getElementById("img-url").value=d.url,document.getElementById("img-alt").value=d.alt,document.forms.editPost.addEventListener("submit",async m=>{const r=$.form.handleSubmit(m);r.tags=r.tags.split(",").map(c=>c.trim()),r.media={url:r["media[url]"],alt:r["media[alt]"]},await h.post.update(t,r)})}catch(e){alert(e.message)}},comment:async e=>{const n=$.form.handleSubmit(e).comment;if(!n||n.trim()===""){alert("Comment cannot be empty.");return}const o=new URLSearchParams(window.location.search).get("id");if(this.replyToId)try{await h.post.comment(o,{body:n,replyToId:this.replyToId}),location.reload()}catch(s){alert(s.message)}else try{await h.post.comment(o,{body:n}),location.reload()}catch(s){alert(s.message)}},deleteComment:()=>{document.querySelectorAll(".comment-delete-button").forEach(t=>{t.addEventListener("click",async n=>{try{const o=new URLSearchParams(window.location.search).get("id"),s=n.target.closest(".comment-item"),i=s.id;window.confirm("Are you sure you want to delete this comment?")&&(await h.post.deleteComment(o,i),s.remove());const r=(await h.post.readPost(o)).data.comments.length,c=document.querySelector(".section-title");c.textContent=`Comment (${r})`}catch(a){alert(a.message)}})})}},profile:{displayProfilePage:async(e=1)=>{const n=new URLSearchParams(window.location.search).get("name");try{const a=await h.profile.readUsersPosts(n,12,e),o=await h.profile.readProfile(n),s=a.data,i=o.data,d=document.querySelector(".avatar");d.src=i.avatar.url;const m=document.querySelector(".username");m.textContent=i.name;const r=document.querySelector(".bio");r.textContent=i.bio,document.querySelector(".followers").textContent=i._count.followers,document.querySelector(".following").textContent=i._count.following,document.querySelector(".posts").textContent=i._count.posts;const c=document.querySelector(".profile-header"),u=i.banner.url;c.style.backgroundImage=`url(${u})`;const L=document.querySelector(".button-area"),g=document.createElement("button");g.classList.add("update-button"),g.textContent="Update Profile";const f=document.createElement("button");f.classList.add("follow-button"),f.id="toggle-button",f.textContent="Follow",L.append(g,f),n===l.user?(g.style.display="block",f.style.display="none"):(g.style.display="none",f.style.display="block"),g.addEventListener("click",()=>{window.location.href="/profile/update/"});const C=document.querySelector(".feed");C.innerHTML="",s.forEach(x=>{const H=V(x);C.appendChild(H)});const S=i._count.posts,v=Math.ceil(S/12),B=`${window.location.pathname}?name=${n}&page=${e}`;window.history.replaceState({},"",B),this.currentPage=e,this.pagination.profilePagination(this.currentPage,v),window.scrollTo({top:0,behavior:"smooth"}),this.events.profile.follow()}catch(a){alert(a.message)}},updateProfile:async()=>{try{const e=l.user,t=await h.profile.readProfile(e),{data:n}=t,{bio:a,avatar:o,banner:s}=n;document.getElementById("bio").value=a||"",document.getElementById("banner").value=s.url||"",document.getElementById("banner-alt").value=s.alt||"",document.getElementById("avatar").value=o.url||"",document.getElementById("avatar-alt").value=o.alt||"",document.forms.updateProfile.addEventListener("submit",async m=>{m.preventDefault();const r=$.form.handleSubmit(m);r.banner={url:r["banner[url]"],alt:r["banner[alt]"]},r.avatar={url:r["avatar[url]"],alt:r["avatar[alt]"]},await h.profile.update(e,r)});const i=document.querySelector(".back-to-profile-page");i.href=`/profile/?name=${l.user}`,i.textContent="My profile page";const d=document.createElement("i");d.classList.add("fa-solid","fa-chevron-left","back-to-profile-icon"),i.insertBefore(d,i.firstChild)}catch(e){alert(e.message)}},follow:()=>{const e=document.getElementById("toggle-button");e.addEventListener("click",async()=>{try{const n=new URLSearchParams(window.location.search).get("name");e.disabled=!0,e.textContent==="Follow"?(await h.profile.follow(n),e.textContent="Unfollow"):(await h.profile.unfollow(n),e.textContent="Follow");const s=(await h.profile.readProfile(n)).data._count.followers;document.querySelector(".followers").textContent=s}catch(t){alert(t.message)}e.disabled=!1})}}};pagination={feedPagination:async(e,t)=>{const n=document.querySelector(".feed-pagination");n.innerHTML="";const a=(r,c)=>{const u=document.createElement("button");return u.textContent=r,u.dataset.page=c,u.className="pagination-button",c===e&&u.classList.add("current-page"),u.addEventListener("click",()=>{this.events.post.displayPosts(c)}),u},o=()=>{const r=document.createElement("span");return r.textContent="...",r},s=document.createElement("button"),i=document.createElement("i");if(i.classList.add("fa-solid","fa-chevron-left"),s.appendChild(i),n.appendChild(s),s.addEventListener("click",()=>{e>1&&this.events.post.displayPosts(e-1)}),e===1?(s.disabled=!0,s.style.cursor="not-allowed"):s.disabled=!1,e<4){for(let c=1;c<4;c++){const u=a(c,c);n.appendChild(u)}n.appendChild(o());const r=a(t,t);n.appendChild(r)}if(e>=4&&e<=t-3){const r=a(1,1);n.appendChild(r),n.appendChild(o());const c=Math.max(3,e-2),u=Math.min(t-2,e+2);for(let g=c;g<=u;g++){const f=a(g,g);n.appendChild(f)}n.appendChild(o());const L=a(t,t);n.appendChild(L)}if(e>t-3){const r=a(1,1);n.appendChild(r),n.appendChild(o());for(let c=t-2;c<=t;c++){const u=a(c,c);n.appendChild(u)}}if(t<=7)for(let r=1;r<8;r++){const c=a(r,r);n.appendChild(c)}const d=document.createElement("button"),m=document.createElement("i");m.classList.add("fa-solid","fa-chevron-right"),d.appendChild(m),n.appendChild(d),d.addEventListener("click",()=>{e<t&&this.events.post.displayPosts(e+1)}),e===t?(d.disabled=!0,d.style.cursor="not-allowed"):d.disabled=!1},singlePostPagination:async()=>{let e=await h.posts.getAllPosts(),{data:t,meta:n}=e;const a=n.totalCount;let o=1;const s=new URLSearchParams(window.location.search),i=Number(s.get("id"));let d=t.findIndex(c=>c.id===i);for(;d===-1&&o*100<a;){o++;let c=await h.posts.getPosts(100,o);t=t.concat(c.data),d=t.findIndex(u=>u.id===i)}const m=document.getElementById("previous-post");if(m)if(d>0){const c=t[d-1].id;m.addEventListener("click",()=>{window.location.href=`/post/?id=${c}`})}else m.disabled=!0,m.style.cursor="not-allowed";const r=document.getElementById("next-post");if(r)if(d<t.length-1){const c=t[d+1]?.id;r.addEventListener("click",()=>{c&&(window.location.href=`/post/?id=${c}`)})}else if(o*100<a){o++;try{let c=await h.posts.getPosts(100,o);t=t.concat(c.data),d=t.findIndex(L=>L.id===i);const u=t[d+1]?.id;r.addEventListener("click",()=>{u?window.location.href=`/post/?id=${u}`:(r.disabled=!0,r.style.cursor="not-allowed")})}catch(c){alert(c.message),r.disabled=!0,r.style.cursor="not-allowed"}}else r.disabled=!0,r.style.cursor="not-allowed"},profilePagination:async(e,t)=>{this.currentPage=e;const n=document.querySelector(".feed-pagination");n.innerHTML="";const a=(m,r)=>{const c=document.createElement("button");return c.textContent=m,c.dataset.page=r,c.className="pagination-button",r===this.currentPage&&c.classList.add("current-page"),c.addEventListener("click",()=>{this.currentPage=r,this.events.profile.displayProfilePage(r)}),c},o=document.createElement("button"),s=document.createElement("i");s.classList.add("fa-solid","fa-chevron-left"),o.appendChild(s),n.appendChild(o),o.addEventListener("click",()=>{this.currentPage>1&&this.events.profile.displayProfilePage(this.currentPage-1)}),this.currentPage===1?(o.disabled=!0,o.style.cursor="not-allowed"):o.disabled=!1;for(let m=1;m<=t;m++){const r=a(m,m);n.appendChild(r)}const i=document.createElement("button"),d=document.createElement("i");d.classList.add("fa-solid","fa-chevron-right"),i.appendChild(d),n.appendChild(i),i.addEventListener("click",()=>{this.currentPage<t&&this.events.profile.displayProfilePage(this.currentPage+1)}),this.currentPage===t?(i.disabled=!0,i.style.cursor="not-allowed"):i.disabled=!1}};animation={headerPadding:()=>{const e=document.querySelector(".profile-header"),t=18.4,n=4,a=window.matchMedia("(min-width: 1024px)");window.addEventListener("scroll",()=>{a.matches?window.scrollY>0?e.style.paddingBottom=`${n}rem`:e.style.paddingBottom=`${t}rem`:e.style.paddingBottom="12.8rem"})}}}new $;
